<?xml version="1.0"?>
<project name="Graphing" default="graphing">

  <description>Graphing - Integration of SchemaCrawler with JUNG. </description>

  <!-- Step 1.
       Define the ant tasks (macros) that come with SchemaCrawler
  -->
  <typedef
    resource="schemacrawler-integrations-antlib.xml"
    classpath="schemacrawler-3.9.jar"/>

  <!-- Step 2.
       Define the classpath to the database driver
  -->
  <path id="db-driver-classpath">
    <fileset dir="../../dbserver">
      <include name="*.jar"/>
    </fileset>
  </path>

  <!-- Step 3.
       Define the classpath to JUNG
  -->
  <path id="graphing-classpath">
    <fileset dir=".">
      <include name="*.jar"/>
    </fileset>
  </path>

  <!-- Step 4.
       Define an ant task that uses the <schemacrawler-graphing> macro
  -->
  <target name="graphing">

    <property name="graph-size" value="800x600"/>
    <property name="outputfile" value="schema-graph.jpg"/>

    <delete file="${outputfile}"/>

    <schemacrawler-graphing
      datasource="hsqldb"
      db-driver-classpath="db-driver-classpath"
      graphing-classpath="graphing-classpath"
      command="verbose_schema"
      graph-size="${graph-size}"
      outputfile="${outputfile}"/>

    <echo message="Graph is in ${outputfile}"/>

  </target>

</project>
